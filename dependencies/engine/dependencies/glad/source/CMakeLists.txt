cmake_minimum_required(VERSION 3.0)
project(Glad)

set(OpenGL_GL_PREFERENCE "GLVND")
find_package(OpenGL REQUIRED)

add_library(glad STATIC "include/glad/glad.h" "src/glad.c")
target_include_directories(glad PUBLIC "include")

target_link_libraries(glad 
    PUBLIC ${OPENGL_LIBRARIES}
)

# Read SDL2 version
if(EXISTS "include/glad/glad.h")
  file(STRINGS "include/glad/glad.h" GLAD_VERSION_LINE REGEX "^[ \t]+OpenGL loader generated by glad [0-9.]*")
  string(REGEX REPLACE "^[ \t]+OpenGL loader generated by glad ([0-9.]*)(.*)" "\\1" GLAD_VERSION "${GLAD_VERSION_LINE}")
  message(STATUS "GLAD_VERSION: ${GLAD_VERSION}")
endif()
